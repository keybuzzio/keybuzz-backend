# KeyBuzz Backend - Production Environment
# Generated: 2025-12-14

# ============================================
# Core
# ============================================
NODE_ENV=production
PORT=4000

# ============================================
# Database (via HAProxy)
# ============================================
DATABASE_URL=postgresql://kb_backend:***@10.0.0.10:5432/keybuzz_backend

# ============================================
# JWT
# ============================================
JWT_SECRET=***  # À remplacer par le secret actuel

# ============================================
# Superadmin
# ============================================
KEYBUZZ_SUPERADMIN_EMAIL=admin@keybuzz.io
KEYBUZZ_SUPERADMIN_PASSWORD=***  # À remplacer

# ============================================
# Vault (pour Amazon credentials)
# ============================================
VAULT_ADDR=https://vault.keybuzz.io:8200
VAULT_TOKEN=***  # À remplacer par le token actuel

# ============================================
# Amazon SP-API (eComLG temporaire)
# ============================================
AMAZON_SPAPI_APP_SOURCE=external_test
AMAZON_USE_MOCK=false

# Fallback credentials (si Vault indisponible)
# NOTE: Les vraies valeurs sont dans Vault (secret/keybuzz/ai/amazon_spapi_app_temp)
AMAZON_SPAPI_CLIENT_ID=amzn1.application-oa2-client.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
AMAZON_SPAPI_CLIENT_SECRET=amzn1.oa2-cs.v1.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
AMAZON_SPAPI_REDIRECT_URI=https://platform-api.keybuzz.io/api/v1/marketplaces/amazon/oauth/callback
AMAZON_SPAPI_ROLE_ARN=arn:aws:iam::XXXXXXXXXXXX:role/SellingPartnerAPIRole
AMAZON_SPAPI_REGION=eu-west-1

# ============================================
# Marketplace Polling
# ============================================
MARKETPLACE_POLL_INTERVAL_SECONDS=300  # 5 minutes

# ============================================
# LiteLLM (AI)
# ============================================
KEYBUZZ_AI_BASE_URL=https://llm.keybuzz.io
KEYBUZZ_AI_API_KEY=***  # Runtime key depuis Vault
KEYBUZZ_AI_PROVIDER=litellm
KEYBUZZ_AI_AUTOSEND_ENABLED=true
KEYBUZZ_AI_AUTOSEND_MAX_PER_TICKET=3
KEYBUZZ_AI_AUTOSEND_COOLDOWN_MINUTES=10

# ============================================
# NOTES
# ============================================
# 1. Remplacer les *** par les vraies valeurs (DATABASE_URL password, JWT_SECRET, etc.)
# 2. VAULT_TOKEN doit être le token racine ou un token avec policy adéquate
# 3. AMAZON_SPAPI_APP_SOURCE=external_test utilise les credentials eComLG
# 4. Pour basculer vers KeyBuzz : changer en AMAZON_SPAPI_APP_SOURCE=keybuzz

